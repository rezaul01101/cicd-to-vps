name: Deploy Website

on:
  push:
    branches:
      - main  # Change this if your branch is named 'master'

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      # Step 1: Check out the code from the repository
      - name: Checkout Code
        uses: actions/checkout@v4

      # Step 2: Copy files to the server
      - name: Copy files via SCP
        uses: appleboy/scp-action@master
        with:
          host: ${{ secrets.SERVER_IP }}
          username: ${{ secrets.SERVER_USER }}
          key: ${{ secrets.SERVER_SSH_KEY }}
          port: 22
          # 'source' is what you want to copy from the repo. 
          # "." means copy everything. You can change this to "index.html" if you only want that file.
          source: "." 
          # 'target' is the path on your server (from your pwd command)
          target: "/root/html"